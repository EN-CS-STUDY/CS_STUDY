## 작성자 : 홍영환

# 로드 벨런싱 (Load Balancing)

---

컴퓨터 네트워크 기술의 일종으로 둘 혹은 셋 이상의 중앙처리 장치 혹은 저장장치와 같은 컴퓨터 자원들에게 작업(Work) 즉 부하(Load)를 나누는 것을 의미한다. 이로써 가용성 및 응답시간을 최적화 시킬 수 있다.

로드 벨런서는 사용자와 서버 그룹 사이에 위치하며 보이지 않는 촉진자 역할을 하여 모든 리소스 서버가 동일하게 사용되도록 하는 디바이스이다.

단순히 여러대의 서버를 구비해 놓는다고 해서 모든 서버에 적절하게 트래픽을 분산시킬 수 있는 것은 아니다. 

여러대의 서버 중 트래픽이 몰리는 서버가 있을 수 있고 이렇게 되면 서비스 장애가 일어날 가능성이 커진다. → 여러 서버에 적절하게 분산

> 한 서버가 일을 다 처리하면 부담스러우니, 여러 서버로 트래픽을 나누는 것
> 

![Untitled](https://github.com/user-attachments/assets/c3622a21-eda9-4142-9baf-65384f597782)

# 📚 로드 밸런싱 기법

---

### 1. 라운드 로빈 방식

> **장점**
> 

라운드 로빈은 여러 대상 사이를 순환하며 균등하게 분산하는 로드 밸런싱 알고리즘이다.

각 대상에게 균등한 처리를 보장하며, 구현이 간단하고 효율적이다.

> **단점**
> 

라운드 로빈 알고리즘은 **대상의 상태가 부하를 고려하지 않고 균등하게 분산**하므로, 대상의 수가 일정하고 모든 대상이 동일한 성늘을 가지고 있다면 적절한 알고리즘이 될 수 있다. 하지만 **대상의 수나 성능이 변할 경우, 특정 대상이 부하를 많이 받는 문제**가 발생할 수 있다.

---

### 2. 가중 기반 라운드 로빈 방식

> **장점**
> 

가중 기반 라운드 로빈 방식은 **각 대상에 가중치(weight)를 부여**하여 부하가 큰 대상에 더 많은 요청을 보내도록 하는 알고리즘이다. 성능이 우수한 서버에 가중치 값을 높게 설정하고, 성능이 좋지 않은 서버에는 가중치를 낮게 설정하는 방식으로 구현할 수 있다.

> **단점**
> 

가중치를 설정하는 과정에서 서버의 부하나 성능을 제대로 파악하지 못하면, 부하가 큰 서버에 많은 요청이 집중되어 서버 부하가 더욱 심해질 수 있다. 또한, 가중치 설정이 일정하지 않으면 부하 분산이 골고루 이루어지지 않을 수 있다.

---

### 3. IP 해시 방식

> **장점**
> 

클라이언트의 IP 주소를 해싱하여 대상 서버를 선택하는 방식이다. 이 알고리즘은 클라이언트가 항상 같은 서버로 연결되도록 보장하므로, 일관된 세션을 유지하는데 유용하다.

> **단점**
> 

특정 클라이언트 IP 주소가 동일한 서버에 계속 요청을 보내게 되는 “해시충돌” 현상이 발생할 수 있다. 특정 서버에 부하가 집중되어 서비스의 안정을 저해할 수 있다.

---

### 4. 최소 연결 방법

> **장점**
> 

현재 연결된 수가 가장 적은 대상에 우선적으로 요청을 전달하는 알고리즘이다. 이 알고리즘은 대상의 부하나 성능 상태를 고려하지 않고, 현재 연결된 수가 적은 대상에 더 많은 요청이 발생하므로, 서버 부하를 골고루 분산시킬 수 있다.

> **단점**
> 

연결 수가 가장 작은 서버에만 요청을 전달하기에, 대상 서버의 부하나 성능 상태를 고려하지 않는다. 이로 인해 불균형한 부하 분산이 발생할 수 있다.

---

### 5. 최소 응답 시간 방법

> **장점**
> 

서버의 응답 시간을 측정하여 가장 빠른 응답을 보인 서버에 요청을 전달하는 알고리즘이다. 대상의 성능 상태를 고려하여 요청을 분산하므로, 빠른 응답 속도와 안정적인 서비스 제공에 유용하다.

> **단점**
> 

응답 시간 측정에 의존하므로, 응답 시간이 부정확한 경우 부하 분산이 적절하게 이루어지지 않을 수 있다. 또한, 대상의 서버 응답 시간이 자주 변동하는 경우, 분산이 불안정해질 수 있다.

---

# 📚 로드 밸런싱의 종류

---

로드밸런싱에는 **L4로드밸런싱**과 **L7로드밸런싱**이 많이 활용된다.

로드 밸런싱의 종류는 **OSI 7계층에 따라 나뉜다.**

- L4 : Transport 계층을 사용, IP 주소와 포트 번호 부하 분산이 가능
- L7 : Application 계층을 사용, URL 또는 HTTP 헤더에서 부하 분산이 가능

![Untitled](https://github.com/user-attachments/assets/4794832b-ca93-4147-a765-d4527e920630)

## L4 로드밸런싱

트래픽을 전송계층의 로드밸런서가 받아 서버들에게 적절히 나누어 주며

L4 로드 밸런서는 네트워크 계층(IP, IPx)이나 전송 계층(TCP, UDP)의 정보(IP주소, 포트번호, MAC주소, 전송 프로토콜)를 바탕으로 로드를 분산한다.

## L7 로드밸런싱

L7 로드 밸런서는 **애플리케이션 계층**에서 로드를 분산하는데 패킷의 내용을 확인하고 그 내용에 따라 로드를 특정 서버에 분배하는 것이 가능하다.

또한, 특정 패턴의 바이러스를 감지해 네트워크 보호가 가능하며, 디도스와 같은 공격을 차단할 수 있어 보안 분야에서도 활용된다.

애플리케이션 계층(HTTP, FTP, SMTP)에서 로드를 분산하기 때문에 HTTP 헤더, 쿠키 등과 같은 사용자의 요청을 기준으로 특정 서버에 트래픽을 분산하는 것이 가능하다.

쉽게 말해 패킷의 내용을 확인하고 그 내용에 따라 로드를 특정 서버에 분배하는 것이 가능한 것이다. URL에 따라 부하를 분산시키거나, HTTP 헤더의 쿠키 값에 따라 부하를 분산하는 등 클라이언트의 요청을 보다 세분화해 서버에 전달할 수 있다.

# 📚 참고문헌

https://aws.amazon.com/ko/what-is/load-balancing/

https://habitus92.tistory.com/22

https://dev.classmethod.jp/articles/load-balancing-types-and-algorithm/

https://tecoble.techcourse.co.kr/post/2021-11-07-load-balancing/