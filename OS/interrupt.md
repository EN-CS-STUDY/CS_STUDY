### μ‘μ„±μ : ν™μν™

# μΈν„°λ½μ¤ (Interrupt)


ν”„λ΅μ„Έμ„μ— μ΄λ²¤νΈλ¥Ό μ•λ ¤ CPUκ°€ ν„μ¬ μν–‰ν•λ μΌμ„ μ €μ¥ ν›„ μ¤‘λ‹¨ν•κ³  λ‹¤λ¥Έ μΌμ„ ν•λ„λ΅ μ²λ¦¬ν•λ” λΉ„λ™κΈ°μ  λ°©λ²•μ„ λ»ν•λ‹¤.

μΈν„°λ½νΈμ—λ” **μ™Έλ¶€ μΈν„°λ½νΈ** / **λ‚΄λ¶€ μΈν„°λ½νΈ**κ°€ μλ‹¤.

## π“Β μ™Έλ¶€ μΈν„°λ½νΈ


![Untitled](https://github.com/EN-CS-STUDY/CS_STUDY/assets/77156858/e4c9ef6c-c85e-4a55-a65f-2d763c26c32e)

ν‚¤λ³΄λ“, λ§μ°μ¤, λ¨λ‹ν„° λ“±κ³Ό κ°™μ€ μ™Έλ¶€ μ¥μΉλ¥Ό **μ…μ¶λ ¥ μ¥μΉ(I/O μ¥μΉ)** λΌκ³  ν•λ‹¤. 

ν•λ“μ›¨μ–΄ μ¥μΉλ§λ‹¤ **β€μ»¨νΈλ΅¤λ¬β€** λΌκ³  λ¶λ¦¬λ” **μ‘μ€ CPU**κ°€ λ¶™μ–΄μλ‹¤.

λ©”λ¨λ¦¬λ¥Ό μ μ–΄ν•λ” μ»¨νΈλ΅¤λ¬λ” λ©”λ¨λ¦¬ μ»¨νΈλ΅¤λ¬, λ””μ¤ν¬λ¥Ό μ μ–΄ν•λ” μ»¨νΈλ΅¤λ¬λ” λ””μ¤ν¬ μ»¨νΈλ΅¤λ¬λΌκ³  λ¶€λ¥Έλ‹¤.

κ·Έλ¦¬κ³  μ¥μΉλ΅ λ¶€ν„° λ“¤μ–΄μ¤κ³  λ‚κ°€λ” λ°μ΄ν„°λ¥Ό μ„μ‹λ΅ μ €μ¥ν•κΈ° μ„ν• μ‘μ€ λ©”λ¨λ¦¬λ¥Ό κ°€μ§€κ³  μλ”λ° κ·Έκ²ƒμ„ **λ΅μ»¬ λ²„νΌ**λΌκ³  λ¶λ¦°λ‹¤.

μλ¥Ό λ“¤μ–΄, λ””μ¤ν¬μ—μ„ λ°μ΄ν„°λ¥Ό μ½μ–΄μ¤λ” μ‘μ—…μ„ ν•κ³  μλ‹¤κ³  κ°€μ •ν•μ. κ·Έλ¬λ©΄ λ””μ¤ν¬ μ»¨νΈλ΅¤λ¬κ°€ λ””μ¤ν¬μ—μ„ λ‚΄μ©μ„ μ½μ–΄μ„ λ΅μ»¬λ²„νΌμ— μ €μ¥ν•λ‹¤. μ΄λ• CPUκ°€ λ΅μ»¬ λ²„νΌλ΅ μ½μ–΄μ¤λ” μ‘μ—…μ΄ λλ‚¬λ”μ§€ μ²΄ν¬ν•λ” κ²ƒμ΄ μ•„λ‹λΌ μ¥μΉμ— μλ” **μ»¨νΈλ΅¤λ¬κ°€ μΈν„°λ½μ¤ μ‹ νΈλ¥Ό λ°μƒμ‹μΌ CPUμ— μ „λ‹¬μ„ ν•λ‹¤.**

μ •ν™•νλ” CPU μ†μ— **μΈν„°λ½νΈ λΌμΈ**μ΄λΌλ” μΉκµ¬κ°€ μλ”λ° μ΄κ³³μ— μΈν„°λ½νΈ μ‹ νΈκ°€ λ“¤μ–΄μ¨λ‹¤.

μ¦‰, CPUλ” μ—΄μ‹¬ν μΌμ„ μ¤‘ β†’ CPUκ°€ μΈν„°λ½νΈ λΌμΈμ— μ‹ νΈκ°€ λ“¤μ–΄μ™”λ”μ§€λ„ ν™•μΈ β†’ μΈν„°λ½νΈ λΌμΈμ—μ„ μΈν„°λ½νΈ λ°μƒμ„ CPUμ—κ² μ•λ ¤μ¤ β†’ CPUλ” ν•λ μΌμ„ λ©μ¶”κ³  ν•΄λ‹Ή μΈν„°λ½μ¤ μ²λ¦¬.

```
π’΅ μ΄λ ‡κ² μ»¨νΈλ΅¤λ¬ λ“± ν•λ“μ›¨μ–΄ μ¥μΉκ°€ μΈν„°λ½νΈ λΌμΈμ„ μ„Έν…ν•κ³  CPUμ—κ² μ΄λ¥Ό ν†µλ³΄ν•λ” λ°©λ²•μ„ μ™Έλ¶€ μΈν„°λ½νΈλΌκ³  ν•λ‹¤.
```


### π“•Β μ™Έλ¶€ μΈν„°λ½νΈ μΆ…λ¥

---

**β…Β νƒ€μ΄λ¨Έ μΈν„°λ½νΈ**

CPUν•ν… κ° ν”„λ΅μ„Έμ¤λ¥Ό μν–‰ν•  μ μλ” μ ν•λ μ‹κ°„μ΄ μ£Όμ–΄μ Έμλ‹¤.

λ§μ•½, νƒ€μ΄λ¨Έ μΈν„°λ½νΈκ°€ μ—†μΌλ©΄ CPUλ” ν•λ‚μ ν”„λ΅μ„Έμ¤λ¥Ό μ™„μ „ν λλ‚  λ• κΉμ§€ ν• ν”„λ΅μ„Έμ¤λ§ μ²λ¦¬ν•λ” λ¬Έμ κ°€ λ°μƒν•λ‹¤.

μ…μ¶λ ¥ μ¥μΉ μ¤‘μ— νƒ€μ΄λ¨ΈλΌλ” μΉκµ¬κ°€ μλ”λ° κ·Έ μΉκµ¬κ°€ μΌμ • μ‹κ°„μ΄ μ§€λ‚λ©΄ CPUμ—κ² λ‹¤λ¥Έ ν”„λ΅μ„Έμ¤λ¥Ό μν–‰ν•΄μ•Ό ν•λ‹¤κ³  μ•λ ¤μ¤€λ‹¤.

νƒ€μ΄λ¨Έ μΈν„°λ½νΈλ” λ³΄ν†µ 10msλ§λ‹¤ μΈν„°λ½νΈλ¥Ό κ±Έμ–΄ λ¬Έλ§¥ κµν™μ΄ μΌμ–΄λ‚λ„λ΅ ν•λ‹¤.

**β…Β  I/O μΈν„°λ½νΈ**

ν”„λ¦°ν„°λ¥Ό μ¶λ ¥ν•λ‹¤λκ°€ λ§μ°μ¤ μ»¤μ„λ¥Ό μ›€μ§μ΄κ³  ν΄λ¦­ν•λ” μƒν™© λ“±μ— I/O μΈν„°λ½νΈκ°€ λ°μƒν•λ‹¤.

[λ§μ°μ¤ μ»¤μ„κ°€ μ›€μ§μΌ λ•]

- λ§μ°μ¤λ¥Ό μ›€μ§μ΄λ©΄ CPUμ— μ „κΈ°μ‹ νΈ(μΈν„°λ½νΈ)λ¥Ό λ³΄λ‚΄μ¤€λ‹¤.

- CPUκ°€ μΈν„°λ½νΈλ¥Ό κ°μ§€ν•λ©΄ ν„μ¬ μ‘μ—…μ„ μ¤‘λ‹¨ν•λ‹¤.

- κ·Έλ¦¬κ³  OSλ‚΄λ¶€μ— μλ” Mouse Interrupt Service RoutineμΌλ΅ μ ν”„ν•λ‹¤.

- Mouse Interrupt Service Routineμ€ μ»¤μ„λ¥Ό μ΄λ™μ‹ν‚¨ μΆν‘λ¥Ό λ¨λ‹ν„°μƒμ— ν‘ν„ν•΄μ£Όλ” μ—­ν• μ„ ν•λ‹¤**.**

**β…Β μ „μ› μ΄μƒ μΈν„°λ½νΈ**

μ»΄ν“¨ν„°κ°€ μ‹¤ν–‰ λ„μ¤‘ μ „μ› κ³µκΈ‰μ΄ μ¤‘λ‹¨λλ©΄ CPUμ— μΈν„°λ½νΈλ¥Ό κ±Έμ–΄μ„ ν„μ¬ μ‘μ—… μ¤‘μ΄λ ν”„λ΅μ„Έμ¤λ¥Ό λ€ν”Όμ‹ν‚¬ μ μλ„λ΅ ν•λ” μ‹ νΈλ¥Ό κ±Έμ–΄μ¤μ•Ό ν•λ‹¤. μ΄λ¥Ό μ „μ› μ΄μƒ μΈν„°λ½νΈλΌκ³  ν•λ‹¤.

## π“Β λ‚΄λ¶€ μΈν„°λ½νΈ

![Untitled](https://github.com/EN-CS-STUDY/CS_STUDY/assets/77156858/7a3a4e0f-7bce-4b4b-b6d7-87d39055999b)

---

### π“μΈν„°λ½νΈ λ°μƒ κ³Όμ •

![Untitled](https://github.com/EN-CS-STUDY/CS_STUDY/assets/77156858/f698d7f9-8845-42ba-ab0a-acf28a854ace)

μ΄μμ²΄μ  μ»¤λ„μ— μΈν„°λ½νΈ λ°μƒ μ‹ ν•΄μ•Όν•  μΌμ„ λ―Έλ¦¬ κ°€μ§€κ³  μλ‹¤.

μΈν„°λ½νΈκ°€ λ°μƒν•λ©΄ CPUλ” μ΄μμ²΄μ μ—κ² μ μ–΄κ¶μ„ μ£Όκ³  μ»¤λ„ μμ—­ λ‚΄μ—μ„ ν•΄λ‹Ή μΈν„°λ½νΈμ μ²λ¦¬λ¥Ό μ„ν•΄μ„ μ •μλ μ½”λ“λ¥Ό μ°Ύλ”λ‹¤.

μ΄μμ²΄μ λ” ν•  μΌμ„ μ‰½κ² μ°Ύμ•„κ°€κΈ° μ„ν•΄Β **μΈν„°λ½νΈ λ²΅ν„°**λΌλ” λ†μ„ κ°€μ§€κ³  μλ”λ° μΈν„°λ½νΈ λ²΅ν„°λ€Β **μΈν„°λ½νΈΒ μΆ…λ¥λ§λ‹¤ λ²νΈλ¥Ό μ •ν•΄μ„, λ²νΈμ— λ”°λΌ μ²λ¦¬ν•΄μ•Ό ν•  μ½”λ“κ°€ μ„μΉν• λ¶€λ¶„μ„ κ°€λ¦¬ν‚¤κ³  μλ”Β μλ£κµ¬μ΅°μ΄λ‹¤.**

μ‹¤μ  μ²λ¦¬ν•΄μ•Ό ν•  μ½”λ“λ”Β **μΈν„°λ½νΈ μ²λ¦¬λ£¨ν‹΄(Β ISR :Β Interrupt service routine )**Β λλ”Β **μΈν„°λ½νΈ ν•Έλ“¤λ¬(interrupt handler)**λΌκ³  λ¶€λ¦…λ‹λ‹¤.Β Β μΈν„°λ½νΈ μ²λ¦¬λ£¨ν‹΄μ€Β **μ—¬λ¬κ°€μ§€ μΈν„°λ½νΈμ— λ€ν•΄ κ°κ° μ²λ¦¬ν•΄μ•Ό ν•  μ—…λ¬΄λ“¤μ„ μ •μν•΄ λ†“μ•λ‹¤.**

### π“•Β λ‚΄λ¶€ μΈν„°λ½νΈ μΆ…λ¥

---

β…Β **Exception μΈν„°λ½νΈ (Trap)**

λ³΄ν†µ **νΈλ©**μ΄λΌκ³ λ„ λ§μ΄ λ¶λ¦¬λ” μΈν„°λ½νΈμ΄λ‹¤.

λ€ν‘μ μΌλ΅ 0μΌλ΅ λ‚λ„κ±°λ‚, μ¤λ²„ν”λ΅μ° / μ–Έλ”ν”λ΅μ°μ™€ κ°™μ΄ μμ‹ μ λ©”λ¨λ¦¬ μμ—­ λ°”κΉ¥μ— μ ‘κ·Όν•λ ¤λ” μ‹λ„ λ“± κ¶ν• μ—†λ” μ‘μ—…μ„ μ‹λ„ν•  λ• μ²λ¦¬ν•λ” μΈν„°λ½νΈμ΄λ‹¤.

μ¦‰, CPUκ°€ λ…λ Ήμ–΄λ¥Ό μν–‰ν•λ‹¤κ°€ μ²λ¦¬ν•  μ μ—†λ” μμ™Έμƒν™©μ„ λ§λ‚λ©΄ μκΈ° μμ‹ μ„ μΈν„°λ½νΈ κ±Έμ–΄μ„ μ»¤λ„μ μ²λ¦¬λ£¨ν‹΄μ„ μν–‰ν•  μ μλ„λ΅ ν•λ‹¤.

β…Β **SVC μΈν„°λ½νΈ**

Supervisor Call μ΄λΌλ”κ±΄λ° μ΄μμ²΄μ λ¥Ό νΈμ¶ν•΄μ„ μ²λ¦¬ν•λΌλ” μλ―Έμ΄λ‹¤. μ‚¬μ©μ ν”„λ΅κ·Έλ¨μ—μ„ "open("a.txt") " λΌλ” λ…λ Ήμ–΄κ°€ λ“¤μ–΄μ™”μ„ λ• μ‚¬μ©μ ν”„λ΅κ·Έλ¨μ΄ μ²λ¦¬ν•  μ μ—†μ„ λ•, μ΄μμ²΄μ  λ‚΄λ¶€μ— μ •μλ μ½”λ“λ¥Ό μ‹¤ν–‰ν•΄μ•Όν•΄μ„ μ»¤λ„λ¨λ“λ΅ μ „ν™μ„ ν•΄μ•Όν•λ‹¤

μ¦‰, μ΄μμ²΄μ μ— μ„λΉ„μ¤λ¥Ό μ”μ²­ν•κΈ° μ„ν•΄ μΈν„°λ½νΈλ¥Ό κ±Έκ³  μ»¤λ„λ¨λ“λ΅ μ „ν™ν•λ” μΈν„°λ½νΈμ΄λ‹¤.

### π¤”Β DMAλ€?

---

**DMAλ” Direct Memory Accessμ μ•½μλ΅, I/O λ””λ°”μ΄μ¤ λ“±μ μ¥μΉκ°€ CPUμ λ„μ›€ μ—†μ΄ λ°μ΄ν„°λ¥Ό λ©”λ¨λ¦¬λ΅ μ§μ ‘ μ „μ†΅ν•  μ μκ² ν•λ” λ°©μ‹μ΄λ‹¤.**

DMA μ»¨νΈλ΅¤λ¬λ” I/O λ””λ°”μ΄μ¤κ°€ λ©”λ¨λ¦¬μ— μ§μ ‘ μ ‘κ·Όν•  μ μλ„λ΅ ν•λ” ν•λ“μ›¨μ–΄ μ¥μΉμ΄λ‹¤

### **DMAμ λ“±μ¥ λ°°κ²½**

---

DMAκ°€ λ“±μ¥ν•κΈ° μ „, I/O λ””λ°”μ΄μ¤κ°€ λ°μ΄ν„°λ¥Ό μ „μ†΅ν•  λ•λ§λ‹¤ CPUκ°€ μΈν„°λ½νΈλ¥Ό λ°›μ•λ‹¤. μ΄λ¬ν• λ°μ΄ν„° μ²λ¦¬κ°€ ν¨μ¨μ μΈ κ²ƒμ²λΌ λ³΄μΌ μ μμ§€λ§, λΉλ²ν• μΈν„°λ½νΈλ” CPUμ— μ‹¬κ°ν• μ¤λ²„ν—¤λ“λ¥Ό μ•ΌκΈ°ν–λ‹¤.

DMAμ λ“±μ¥μΌλ΅ μ΄λ¬ν• μΈν„°λ½νΈ μ¤λ²„ν—¤λ“λ¥Ό μ¤„μ΄κ³  CPUκ°€ κΈ°λ³Έμ μΈ μ»΄ν“¨ν… μ‘μ—…μ— λ” μ§‘μ¤‘ν•  μ μλ„λ΅ λ§λ“¤μ—λ‹¤.

### π“Β μ°Έκ³ λ¬Έν—

https://github.com/devSquad-study/2023-CS-Study/blob/main/OS/os_interrupt.md

[[μ΄μμ²΄μ  7νΈ] μΈν„°λ½νΈκ°€ λ¬΄μ—‡μΈκ°€](https://baebalja.tistory.com/354)

[π–¥οΈ [μ΄μμ²΄μ ] μΈν„°λ½νΈ(Interrupt) & DMA(Direct Memory Access)λ€?](https://scottxchoo.xyz/cs-os-004/)